<div fxLayout="row wrap" class="decentral-row" fxLayoutAlign="center start">
  <div
    fxLayout="row wrap"
    fxLayoutAlign="space-between start"
    fxFlex="100"
    fxFlex.gt-md="85"
    fxFlex.md="85"
    fxLayoutGap="10px grid"
    fxLayoutGap.md="0"
    fxLayoutGap.gt-md="0"
  >
    <div
      fxLayout="row wrap"
      fxFlex="100"
      fxFlex.gt-md="33"
      fxFlex.md="33"
      fxLayoutAlign="space-between start"
    >
      <!-- <div class="text" fxFlex *ngIf="totalVolume1M != undefined">
        {{ "marketcap.volume_paragraph.30d.p1" | translate }}
        <strong
          >{{ this.getSimbol() }}{{ totalVolume1M | roundedValue }}</strong
        >
        {{ "marketcap.volume_paragraph.30d.p2" | translate }}
        <strong>{{ totalSwap1M | roundedValue }}</strong>
        {{ "marketcap.volume_paragraph.30d.p3" | translate }}
      </div>
      <div class="text" fxFlex *ngIf="totalVolume24H != undefined">
        {{ "marketcap.volume_paragraph.24h.p1" | translate }}
        <strong
          >{{ this.getSimbol() }}{{ totalVolume24H | roundedValue }}</strong
        >
        <font *ngIf="totalSwap24H != undefined">
          {{ "marketcap.volume_paragraph.24h.p2" | translate }}
          <strong>{{ totalSwap24H | roundedValue }}</strong>
          {{ "marketcap.volume_paragraph.24h.p3" | translate }}
        </font>
      </div> -->

      <!-- <div fxLayout="row wrap" class="action-buttons" fxFlex fxLayoutAlign="space-between center" fxFill>
        <button mat-raised-button class="swap-button" fxFlex="48" fxFlex.gt-md="30" fxFlex.md="30">
          <mat-icon class="add-wallet-icon">swap_horiz</mat-icon>
          <span class="add-wallet-button-label">Swap</span>
        </button>
        <button mat-raised-button class="add-button" fxFlex="48" fxFlex.gt-md="30" fxFlex.md="30">
          <mat-icon class="add-wallet-icon">add</mat-icon>
          <span class="add-wallet-button-label">Add</span>
        </button>
        <button mat-raised-button class="manage-button" fxFlex="100" fxFlex.gt-md="30" fxFlex.md="30">
          <mat-icon class="add-wallet-icon">article</mat-icon>
          <span class="add-wallet-button-label">Manage</span>
        </button>
      </div> -->
      <!--24H-->
      <div class="collectibles" fxLayout="row" fxLayoutAlign="space-evenly center" fxFlex="23">
        <div fxLayout="column">
          <span class="title">{{ "marketcap.volume_paragraph.24h.volume_title" | translate }}</span>
          <div fxLayout="row" fxLayoutAlign="center center">
            <div class="value">{{ this.getSimbol() }}{{ totalVolume24H | roundedValue }}</div>
          </div>
        </div>
      </div>
      <div class="collectibles" fxLayout="row" fxLayoutAlign="space-evenly center" fxFlex="23">
        <div fxLayout="column">
          <span class="title">{{ "marketcap.volume_paragraph.24h.swap_title" | translate }}</span>
          <div fxLayout="row" fxLayoutAlign="center center">
            <div class="value">{{ totalSwap24H | roundedValue }}</div>
          </div>
        </div>
      </div>
      <!--30D-->
      <div class="collectibles" fxLayout="row" fxLayoutAlign="space-evenly center" fxFlex="23">
        <div fxLayout="column">
          <span class="title">{{ "marketcap.volume_paragraph.30d.volume_title" | translate }}</span>
          <div fxLayout="row" fxLayoutAlign="center center">
            <div class="value">{{ this.getSimbol() }}{{ totalVolume1M | roundedValue }}</div>
          </div>
        </div>
      </div>
      <div class="collectibles" fxLayout="row" fxLayoutAlign="space-evenly center" fxFlex="23">
        <div fxLayout="column">
          <span class="title">{{ "marketcap.volume_paragraph.30d.swap_title" | translate }}</span>
          <div fxLayout="row" fxLayoutAlign="center center">
            <div class="value">{{ totalSwap1M | roundedValue }}</div>
          </div>
        </div>
      </div>
    </div>
    <div
      fxLayout="row wrap"
      fxFlex="100"
      fxFlex.gt-md="37"
      fxFlex.md="37"
      fxLayoutAlign="center center"
    >
      <div
        class="collectibles"
        fxLayout="row"
        fxLayoutAlign="space-evenly center"
        fxFlex="100"
      >
        <!--<img
          src="../../../../assets/images/collectibles/huginn_and_munnin.png"
          width="50px"
          alt="huginn_and_munnin"
        />-->
        <div fxLayout="column">
          <span class="title">{{
            "marketcap.liquidity_search.title" | translate
          }}</span>
          <div fxLayout="row" fxLayoutAlign="space-between center">
            <!--<span>Huginn<br />and Munnin</span>-->
            <mat-form-field appearance="outline" class="liquidity-input">
              <input
                matInput
                [placeholder]="
                  translation ? translation.liquidity_search.placeholder : ''
                "
                [(ngModel)]="liquidityAddress"
              />
              <mat-error *ngIf="liquidityAddressMsg">{{
                liquidityAddressMsg
              }}</mat-error>
            </mat-form-field>
            <button
              mat-button
              class="liquidity-button"
              (click)="gotToLiquidity()"
            >
              {{ "marketcap.liquidity_search.button" | translate }}
            </button>
          </div>
        </div>
      </div>
      <!--<div
        class="collectibles"
        fxLayout="row"
        fxLayoutAlign="space-evenly center"
        fxFlex="100"
        fxFlex.gt-md="47"
        fxFlex.md="47"
      >
        <img
          src="../../../../assets/images/collectibles/gulltoppr.png"
          width="50px"
          alt="gulltoppr"
        />
        <div fxLayout="column">
          <span class="title">Thorchain Collectibles</span>
          <div fxLayout="row" fxLayoutAlign="space-between center">
            <span>Gulltoppr</span>
            <button
              mat-raised-button
              class="get-button"
              (click)="
                goTo(
                  'https://opensea.io/assets/0xb85070695a7599e3f6a8d46e8bd716d1923769b8/66'
                )
              "
            >
              Get
            </button>
          </div>
        </div>
      </div>-->
    </div>

    <div
      fxLayout="column"
      fxFlex="100"
      fxFlex.gt-md="25"
      fxFlex.md="25"
      class="wallet-resume-widget-wrapper"
    >
      <!--<div fxLayout="row" class="section-buttons" fxLayoutAlign="space-between center">
        <div>Liquidity</div>
        <div>Portfolio</div>
        <div>Transactions</div>
      </div>-->
      <div
        fxLayout="column"
        class="wallet-resume-widget"
        fxLayoutAlign="center center"
      >
        <div class="wallet-msg" *ngIf="!resume">
          {{ "marketcap.wallet_resume.not_resume.p1" | translate }} <br />
          {{ "marketcap.wallet_resume.not_resume.p2" | translate }}
        </div>
        <div
          class="connected-wallet-msg"
          *ngIf="resume"
          fxLayout="column"
          fxLayoutAlign="center center"
        >
          <span class="title">{{
            "marketcap.wallet_resume.title" | translate
          }}</span>
          <span class="value" *ngIf="showHideToggle == true"
            >{{ this.getSimbol() }}{{ resume | roundedValue }}</span
          >
          <span class="value" *ngIf="showHideToggle == false"
            >{{ this.getSimbol() }}******</span
          >
        </div>
      </div>
    </div>
  </div>
</div>

<!-- LOADER -->

<div
  fxLayout="row wrap"
  class="decentral-row"
  fxLayoutAlign="center center"
  *ngIf="poolList.length === 0"
>
  <div
    fxFlex="85"
    fxFlex.gt-md="18"
    fxFlex.md="18"
    class="table-loader"
    fxLayoutAlign="center center"
  >
    <img [src]="loaderFile" alt="loader" />
  </div>
</div>

<!-- SEARCH -->

<div
  id="table-id"
  fxLayout="row wrap"
  class="decentral-row full-height"
  fxLayoutAlign="center start"
  *ngIf="poolList.length > 1"
>
  <mat-form-field
    class="table-search"
    fxFlex="100"
    fxFlex.gt-md="85"
    fxFlex.md="85"
  >
    <mat-icon matPrefix>search</mat-icon>
    <input
      type="search"
      matInput
      [placeholder]="translation ? translation.search_pools.placeholder : ''"
      (keyup)="applyFilter($event)"
    />
  </mat-form-field>

  <!-- CONTENT TABLE -->

  <div
    class="assets-table-wrapper"
    fxLayoutAlign="start start"
    fxLayoutAlign.gt-md="center start"
    fxLayoutAlign.md="center start"
    fxFlex="100"
    fxFlex.gt-md="85"
    fxFlex.md="85"
  >
    <table
      mat-table
      fxFlex="100"
      [dataSource]="dataSource"
      matSort
      (matSortChange)="sortData($event)"
      class="assets-table"
    >
      <!-- Rank Column -->
      <ng-container matColumnDef="rank">
        <th class="th-stiky1" mat-header-cell *matHeaderCellDef mat-sort-header>
          #
        </th>
        <td
          [class]="tdColorOne()"
          mat-cell
          *matCellDef="let element"
          (click)="goToDetails(element.asset.fullname, element.status)"
        >
          <!--(click)="goToDetails(element.asset.fullname,element.status)"-->
          {{ element.rank | number: "2.0-0" }}
        </td>
      </ng-container>

      <!-- Name Column -->
      <ng-container matColumnDef="name">
        <th class="th-stiky2" mat-header-cell *matHeaderCellDef mat-sort-header>
          {{ "marketcap.table.headers.asset" | translate }}
        </th>
        <td
          [class]="tdColorTwo()"
          mat-cell
          *matCellDef="let element"
          (click)="goToDetails(element.asset.fullname, element.status)"
        >
          <div class="name-logo" fxLayout="row" fxLayoutAlign="center center">
            <div class="name-logo-img">
              <img
                src="{{ element.asset.iconPath }}"
                alt="{{ element.asset.symbol }}"
                onerror='this.src="/assets/icons/tokens/asset-rune.84d6fe9e6b77ef92d048fe7a44c9370d.svg"'
                loading="lazy"
              />
            </div>
            <div class="name-logo-asset">
              <span class="span-asset"> {{ element.chain }} </span><br />
              <span>
                {{ element.asset.ticker }}
              </span>
            </div>
          </div>
        </td>
      </ng-container>

      <!-- Chain Column -->
      <ng-container matColumnDef="chain">
        <th
          class="delete-column"
          mat-header-cell
          *matHeaderCellDef
          mat-sort-header
        >
          Ticker
        </th>
        <td
          class="delete-column"
          mat-cell
          *matCellDef="let element"
          (click)="goToDetails(element.asset.fullname, element.status)"
        >
          {{ element.chain }}.{{ element.asset.ticker }}
        </td>
      </ng-container>

      <!-- Price Column -->
      <ng-container matColumnDef="price">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          {{ "marketcap.table.headers.price" | translate }}
        </th>
        <td
          mat-cell
          *matCellDef="let element"
          (click)="goToDetails(element.asset.fullname, element.status)"
        >
          <span *ngIf="element.price"
            >{{ this.getSimbol() }}{{ element.price | roundedValue }}</span
          >
        </td>
      </ng-container>

      <!-- Depth Column -->
      <ng-container matColumnDef="depth">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          {{ "marketcap.table.headers.depth" | translate }}
        </th>
        <td
          mat-cell
          *matCellDef="let element"
          (click)="goToDetails(element.asset.fullname, element.status)"
        >
          {{ this.getSimbol() }}{{ element.depth / 100000000 | roundedValue }}
        </td>
      </ng-container>

      <!-- APY Column -->
      <ng-container matColumnDef="apy">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>APY</th>
        <td
          mat-cell
          *matCellDef="let element"
          (click)="goToDetails(element.asset.fullname, element.status)"
        >
          {{ element.apy * 100 | number: "0.0-2" }}%
        </td>
      </ng-container>

      <!-- Volume Column -->
      <ng-container matColumnDef="volume">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          {{ "marketcap.table.headers.volume" | translate }}
        </th>
        <td
          mat-cell
          *matCellDef="let element"
          (click)="goToDetails(element.asset.fullname, element.status)"
        >
          {{ this.getSimbol() }}{{ element.volume / 100000000 | roundedValue }}
        </td>
      </ng-container>

      <!-- Percentage Column -->
      <ng-container matColumnDef="perc">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>24h %</th>
        <td
          mat-cell
          *matCellDef="let element"
          (click)="goToDetails(element.asset.fullname, element.status)"
        >
          <div
            *ngIf="element.isLoading == true"
            fxLayout="row"
            fxLayoutAlign="center center"
          >
            <mat-spinner diameter="32"></mat-spinner>
          </div>
          <span
            [class]="getPercClass(element.perc)"
            *ngIf="element.isLoading == false"
            >{{ element.perc | number: "1.2" }}%</span
          >
        </td>
      </ng-container>

      <!-- weeklyChange Column -->
      <ng-container matColumnDef="weeklyChange">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>7d %</th>
        <td
          mat-cell
          *matCellDef="let element"
          (click)="goToDetails(element.asset.fullname, element.status)"
        >
          <div
            *ngIf="element.isLoading == true"
            fxLayout="row"
            fxLayoutAlign="center center"
          >
            <mat-spinner diameter="32"></mat-spinner>
          </div>
          <span
            [class]="getPercClass(element.weeklyChange)"
            *ngIf="element.isLoading == false"
            >{{ element.weeklyChange | number: "1.2" }}%</span
          >
        </td>
      </ng-container>

      <!-- Graph Column -->
      <ng-container matColumnDef="graph">
        <th mat-header-cell *matHeaderCellDef>7d</th>
        <td
          mat-cell
          *matCellDef="let element"
          (click)="goToDetails(element.asset.fullname, element.status)"
        >
          <div
            *ngIf="element.isLoading == true"
            fxLayout="row"
            fxLayoutAlign="center center"
          >
            <mat-spinner diameter="32"></mat-spinner>
          </div>
          <div
            echarts
            [options]="element.graph"
            class="market-chart"
            *ngIf="element.isLoading == false"
          ></div>
        </td>
      </ng-container>

      <!-- Status Column -->
      <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          {{ "marketcap.table.headers.status" | translate }}
        </th>
        <td
          mat-cell
          *matCellDef="let element"
          (click)="goToDetails(element.asset.fullname, element.status)"
        >
          <div fxLayoutAlign="center center">
            <div
              [class]="getStatusClass(element.status)"
              matTooltip="{{ 'marketcap.table.status.' + element.status | translate }}"
            ></div>
          </div>
        </td>
      </ng-container>

      <!-- Operations Column -->
      <ng-container matColumnDef="operation">
        <th mat-header-cell *matHeaderCellDef>
          {{ "marketcap.table.headers.operations" | translate }}
        </th>
        <td mat-cell *matCellDef="let element">
          <div class="buttons" fxLayoutAlign="center center">
            <button
              mat-raised-button
              class="swap-button"
              #tooltip="matTooltip"
              [matTooltip]="
                translation ? translation.table.operations_tooltips.swap : ''
              "
              matTooltipPosition="below"
              matTooltipHideDelay="100"
              (click)="
                openOperationsModal(
                  element.chain,
                  element.asset.ticker,
                  element.asset.fullname,
                  'swap',
                  element.status
                )
              "
            >
              <img
                src="../../../../assets/icons/swap.svg"
                width="18px"
                alt="swap"
              />
            </button>

            <button
              mat-raised-button
              class="add-button"
              #tooltip="matTooltip"
              [matTooltip]="
                translation ? translation.table.operations_tooltips.add : ''
              "
              matTooltipPosition="below"
              matTooltipHideDelay="100"
              (click)="
                openOperationsModal(
                  element.chain,
                  element.asset.ticker,
                  element.asset.fullname,
                  'add',
                  element.status
                )
              "
            >
              <img
                src="../../../../assets/icons/add.svg"
                width="18px"
                alt="add"
              />
            </button>

            <button
              mat-raised-button
              class="manage-button"
              #tooltip="matTooltip"
              [matTooltip]="
                translation
                  ? translation.table.operations_tooltips.withdraw
                  : ''
              "
              matTooltipPosition="below"
              matTooltipHideDelay="100"
              (click)="
                openOperationsModal(
                  element.chain,
                  element.asset.ticker,
                  element.asset.fullname,
                  'withdraw',
                  element.status
                )
              "
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="64 64 896 896"
                focusable="false"
                data-icon="swap"
                width="1.25rem"
                height="1.25rem"
                fill="currentColor"
                aria-hidden="true"
              >
                <path
                  d="M868 732h-70.3c-4.8 0-9.3 2.1-12.3 5.8-7 8.5-14.5 16.7-22.4 24.5a353.84 353.84 0 01-112.7 75.9A352.8 352.8 0 01512.4 866c-47.9 0-94.3-9.4-137.9-27.8a353.84 353.84 0 01-112.7-75.9 353.28 353.28 0 01-76-112.5C167.3 606.2 158 559.9 158 512s9.4-94.2 27.8-137.8c17.8-42.1 43.4-80 76-112.5s70.5-58.1 112.7-75.9c43.6-18.4 90-27.8 137.9-27.8 47.9 0 94.3 9.3 137.9 27.8 42.2 17.8 80.1 43.4 112.7 75.9 7.9 7.9 15.3 16.1 22.4 24.5 3 3.7 7.6 5.8 12.3 5.8H868c6.3 0 10.2-7 6.7-12.3C798 160.5 663.8 81.6 511.3 82 271.7 82.6 79.6 277.1 82 516.4 84.4 751.9 276.2 942 512.4 942c152.1 0 285.7-78.8 362.3-197.7 3.4-5.3-.4-12.3-6.7-12.3zm88.9-226.3L815 393.7c-5.3-4.2-13-.4-13 6.3v76H488c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h314v76c0 6.7 7.8 10.5 13 6.3l141.9-112a8 8 0 000-12.6z"
                />
              </svg>
            </button>

            <button
              mat-raised-button
              class="manage-button"
              #tooltip="matTooltip"
              [matTooltip]="
                translation ? translation.table.operations_tooltips.send : ''
              "
              matTooltipPosition="below"
              matTooltipHideDelay="100"
              (click)="
                openOperationsModal(
                  element.chain,
                  element.asset.ticker,
                  element.asset.fullname,
                  'send',
                  element.status
                )
              "
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="64 64 896 896"
                focusable="false"
                data-icon="send"
                width="1.25rem"
                height="1.25rem"
                fill="currentColor"
                aria-hidden="true"
              >
                <path
                  d="M931.4 498.9L94.9 79.5c-3.4-1.7-7.3-2.1-11-1.2a15.99 15.99 0 00-11.7 19.3l86.2 352.2c1.3 5.3 5.2 9.6 10.4 11.3l147.7 50.7-147.6 50.7c-5.2 1.8-9.1 6-10.3 11.3L72.2 926.5c-.9 3.7-.5 7.6 1.2 10.9 3.9 7.9 13.5 11.1 21.5 7.2l836.5-417c3.1-1.5 5.6-4.1 7.2-7.1 3.9-8 .7-17.6-7.2-21.6zM170.8 826.3l50.3-205.6 295.2-101.3c2.3-.8 4.2-2.6 5-5 1.4-4.2-.8-8.7-5-10.2L221.1 403 171 198.2l628 314.9-628.2 313.2z"
                ></path>
              </svg>
            </button>
          </div>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    </table>
  </div>

  <!-- PAGINATION -->
  <div
    fxLayout="row"
    fxLayoutAlign="space-between center"
    fxFlex="100"
    fxFlex.gt-md="85"
    fxFlex.md="85"
    *ngIf="dataSource.data.length > 1"
  >
    <div class="paginator-pagesize">
      <span>{{ "marketcap.table.paginator" | translate }}: &nbsp;&nbsp;</span>
      <button
        mat-icon-button
        [class]="getPaginatorClass(10)"
        (click)="setPaginatorPageSize(10)"
      >
        10
      </button>
      <button
        mat-icon-button
        [class]="getPaginatorClass(50)"
        (click)="setPaginatorPageSize(50)"
      >
        50
      </button>
      <button
        mat-icon-button
        [class]="getPaginatorClass(100)"
        (click)="setPaginatorPageSize(100)"
      >
        100
      </button>
    </div>
    <div>
      <mat-paginator
        showFirstLastButtons
        hidePageSize
        [length]="dataSource.data.length"
        [pageSize]="poolRatesTablePageSize"
      >
      </mat-paginator>
    </div>
  </div>
</div>
